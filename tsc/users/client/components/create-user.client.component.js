System.register(['angular2/core', '../services/user.client.service'], function(exports_1, context_1) {
    "use strict";
    var __moduleName = context_1 && context_1.id;
    var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
        if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
        else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
        return c > 3 && r && Object.defineProperty(target, key, r), r;
    };
    var __metadata = (this && this.__metadata) || function (k, v) {
        if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
    };
    var core_1, user_client_service_1;
    var CreateUserComponent;
    return {
        setters:[
            function (core_1_1) {
                core_1 = core_1_1;
            },
            function (user_client_service_1_1) {
                user_client_service_1 = user_client_service_1_1;
            }],
        execute: function() {
            CreateUserComponent = (function () {
                function CreateUserComponent(_service) {
                    this._service = _service;
                    this.user = new user_client_service_1.User('', '');
                    this.errorMsg = '';
                }
                CreateUserComponent.prototype.login = function () {
                    if (!this._service.login(this.user)) {
                        this.errorMsg = 'Failed to login';
                    }
                };
                CreateUserComponent = __decorate([
                    core_1.Component({
                        selector: 'create-user-form',
                        providers: [user_client_service_1.AuthenticationService],
                        template: "\n<section>\n\n\t<form novalidate name=\"userForm\" autocomplete=\"off\" class=\"form-horizontal\" role=\"form\">\n\n\t\t<div class=\"page-header\">\n\t\t\t<h3>\n\t\t\t\t{{title}}\n\t\t\t\t<small>{{subtitle}}</small>\n\n\t\t\t\t<!-- Show control to re-sync the user's cache when proxy-pki is the auth strategh -->\n\t\t\t\t<button data-ng-disabled=\"refreshing\" data-ng-if=\"proxyPki && mode === 'edit'\" data-ng-click=\"refreshCredentials()\" class=\"btn btn-default btn-sm pull-right\">\n\t\t\t\t\t<span class=\"fa fa-refresh\"></span> Refresh User Credentials\n\t\t\t\t</button>\n\t\t\t</h3>\n\t\t</div>\n\n\t\t<!-- Alert Notifications -->\n\t\t<div data-alert data-ng-repeat=\"alert in alertService.alerts\" data-type=\"{{alert.type}}\" data-close=\"alertService.clear($index)\">{{alert.msg}}</div>\n\n\t\t<!-- Basic Information: These are shown always, but disabled in some contexts -->\n\n\t\t<!-- Name -->\n\t\t<div class=\"form-group row\">\n\t\t\t<label class=\"col-md-2 control-label\" for=\"name\">Name<span class=\"text-danger\"><strong> *</strong></span></label>\n\t\t\t<div class=\"col-md-10\"><input type=\"text\" class=\"form-control\" id=\"name\" data-ng-model=\"user.name\" data-ng-disabled=\"metadataLocked\" required /></div>\n\t\t</div>\n\n\t\t<!-- Username -->\n\t\t<div class=\"form-group row\">\n\t\t\t<label class=\"col-md-2 control-label\" for=\"username\">Username<span class=\"text-danger\"><strong> *</strong></span></label>\n\t\t\t<div class=\"col-md-10\"><input type=\"text\" id=\"username\" class=\"form-control\" data-ng-model=\"user.username\" data-ng-disabled=\"metadataLocked\" required /></div>\n\t\t</div>\n\n\t\t<!-- Organization -->\n\t\t<div class=\"form-group row\">\n\t\t\t<label class=\"col-md-2 control-label\" for=\"organization\">Organization<span class=\"text-danger\"><strong> *</strong></span></label>\n\t\t\t<div class=\"col-md-10\"><input type=\"text\" class=\"form-control\" id=\"organization\" data-ng-model=\"user.organization\" data-ng-disabled=\"metadataLocked\" required /></div>\n\t\t</div>\n\n\t\t<!-- Email -->\n\t\t<div class=\"form-group row\">\n\t\t\t<label class=\"col-md-2 control-label\" for=\"email\">Email<span class=\"text-danger\"><strong> *</strong></span></label>\n\t\t\t<div class=\"col-md-10\"><input type=\"email\" class=\"form-control\" id=\"email\" data-ng-model=\"user.email\" data-ng-disabled=\"metadataLocked\" required /></div>\n\t\t</div>\n\n\t\t<!-- Phone -->\n\t\t<div class=\"form-group row\" data-ng-show=\"smsEnabled\">\n\t\t\t<label class=\"col-md-2 control-label\" for=\"phone\">Phone<span class=\"text-danger\"></span></label>\n\t\t\t<div class=\"col-md-5\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\tclass=\"form-control no-spinner\"\n\t\t\t\t\tid=\"phone\"\n\t\t\t\t\tdata-ng-model=\"phoneNumber\"\n\t\t\t\t\tplaceholder=\"Number, Ex: 5551112222\"\n\t\t\t\t\tdata-ng-disabled=\"metadataLocked\" />\n\t\t\t\t</div>\n\t\t\t<div class=\"col-md-5\">\n\t\t\t\t<select\n\t\t\t\t\tclass=\"form-control\"\n\t\t\t\t\tid=\"phone-provider\"\n\t\t\t\t\tdata-ng-model=\"phoneProvider\"\n\t\t\t\t\tdata-ng-options=\"opt as opt.label for opt in phoneProviders | orderBy:orderByLabel\"\n\t\t\t\t\tdata-ng-disabled=\"!phoneNumber || metadataLocked\" >\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</div>\n\n\n\t\t<!-- Local Login Information -->\n\t\t<div data-ng-if=\"config.auth === 'local'\">\n\n\t\t\t<div class=\"page-header\">\n\t\t\t\t<h3>\n\t\t\t\t\tPassword\n\t\t\t\t\t<small>At least 6 characters. <span data-ng-if=\"mode === 'edit' || mode === 'admin-edit'\">Leave blank if you do not want to change the password.</span></small>\n\t\t\t\t</h3>\n\t\t\t</div>\n\n\t\t\t<!-- Current password is needed if you aren't an admin and you're editing -->\n\t\t\t<div class=\"form-group row\" data-ng-if=\"mode === 'edit'\">\n\t\t\t\t<label class=\"col-md-2 control-label\" for=\"currentPassword\">Current Password</label>\n\t\t\t\t<div class=\"col-md-10\"><input type=\"password\" class=\"form-control\" id=\"currentPassword\" data-ng-model=\"user.currentPassword\"></div>\n\t\t\t</div>\n\n\t\t\t<div class=\"form-group row\">\n\t\t\t\t<label class=\"col-md-2 control-label\" for=\"password\">New Password</label>\n\t\t\t\t<div class=\"col-md-10\"><input type=\"password\" class=\"form-control\" id=\"password\" data-ng-model=\"user.password\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"form-group row\">\n\t\t\t\t<label class=\"col-md-2 control-label\" for=\"password2\">Re-enter</label>\n\t\t\t\t<div class=\"col-md-10\"><input type=\"password\" id=\"password2\" class=\"form-control\" id=\"verifyPassword\" data-ng-model=\"user.verifyPassword\"></div>\n\t\t\t</div>\n\n\t\t</div>\n\n\n\t\t<!-- PKI Information -->\n\t\t<div data-ng-if=\"proxyPki\">\n\n\t\t\t<!-- Stuff that admins can modify but normal users don't see -->\n\t\t\t<div data-ng-if=\"(mode === 'admin-edit' || mode === 'admin-create')\">\n\t\n\t\t\t\t<!-- Bypass Access Checker -->\n\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t<label class=\"col-md-2 control-label\">Access Check</label>\n\t\n\t\t\t\t\t<div class=\"col-md-10\">\n\t\t\t\t\t\t<button type=\"button\" class=\"btn\"\n\t\t\t\t\t\t\t\tdata-ng-class=\"{ 'btn-selected': user.bypassAccessCheck, 'btn-unselected': !user.bypassAccessCheck }\" data-ng-attr-title=\"Bypass Access Check\"\n\t\t\t\t\t\t\t\tdata-btn-checkbox data-ng-model=\"user.bypassAccessCheck\">\n\t\t\t\t\t\t\t<i class=\"fa fa-fw\" data-ng-class=\"{ 'fa-check-square-o': user.bypassAccessCheck, 'fa-square-o': !user.bypassAccessCheck }\"></i>\n\t\t\t\t\t\t\t\tBypass Access Check\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\n\t\t\t<!-- Stuff that normal users can see, but won't be able to modify -->\n\t\t\t<div data-ng-if=\"(mode === 'admin-edit' || mode === 'edit')\">\n\n\t\t\t\t<!-- dn -->\n\t\t\t\t<div class=\"form-group row\">\n\t\t\t\t\t<label class=\"col-md-2 control-label\" for=\"dn\">DN</label>\n\t\t\t\t\t<div class=\"col-md-10\"><input type=\"text\" id=\"dn\" class=\"form-control\" data-ng-model=\"user.providerData.dn\" disabled/></div>\n\t\t\t\t</div>\n\t\t\t\n\t\t\t\t<div class=\"form-group row\">\n\t\t\t\t\t<label class=\"col-md-2 control-label\" for=\"externalRoles\">External Roles</label>\n\t\t\t\t\t<div class=\"col-md-10\"><input type=\"text\" class=\"form-control\" id=\"externalRoles\" data-ng-model=\"user.externalRoles\" disabled></div>\n\t\t\t\t</div>\n\t\n\t\t\t\t<div class=\"form-group row\">\n\t\t\t\t\t<label class=\"col-md-2 control-label\" for=\"externalGroups\">External Groups</label>\n\t\t\t\t\t<div class=\"col-md-10\"><input type=\"text\" class=\"form-control\" id=\"externalGroups\" data-ng-model=\"user.externalGroups\" disabled></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t</div>\n\n\n\n\n\t\t<!-- Admin only stuff -->\n\t\t<div data-ng-if=\"mode === 'admin-edit' || mode === 'admin-create'\">\n\n\t\t\t<div class=\"form-group\">\n\t\t\t\t<label class=\"col-md-2 control-label\">Roles</label>\n\n\t\t\t\t<div class=\"col-md-10 btn-group\">\n\t\t\t\t\t<button data-ng-repeat=\"role in roles.array\"\n\t\t\t\t\t\t\ttype=\"button\" class=\"btn\"\n\t\t\t\t\t\t\tdata-ng-class=\"{ 'btn-selected': user.roles[role.role], 'btn-unselected': !user.roles[role.role] }\" data-ng-attr-title=\"{{role.description}}\"\n\t\t\t\t\t\t\tdata-btn-checkbox data-ng-model=\"user.roles[role.role]\">\n\t\t\t\t\t\t<i class=\"fa fa-fw\" data-ng-class=\"{ 'fa-check-square-o': user.roles[role.role], 'fa-square-o': !user.roles[role.role] }\"></i>\n\t\t\t\t\t\t{{role.label}}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\n\t\t</div>\n\n\n\t\t<div class=\"form-group row\" data-ng-show=\"error\">\n\t\t\t<div class=\"col-md-offset-2 col-md-10\">\n\t\t\t\t<div class=\"text-danger\">\n\t\t\t\t\t<strong>{{error}}</strong>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\n\t\t<div class=\"form-group row\">\n\t\t\t<div class=\"col-md-12\">\n\t\t\t\t<div class=\"pull-right\">\n\t\t\t\t\t<button type=\"submit\" class=\"btn btn-default\" data-ng-click=\"okAction()\" data-ng-disabled=\"okDisabled\">{{okButtonText}}</button>\n\t\t\t\t\t<a type=\"button\" class=\"btn btn-link\" data-ng-if=\"mode === 'signup'\" data-ui-sref=\"auth.signin\">or Sign In</a>\n\t\t\t\t\t<a type=\"button\" class=\"btn btn-link\" data-ng-if=\"mode === 'admin-create' || mode === 'admin-edit'\" data-ui-sref=\"admin.user.list\">Cancel</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t</form>\n\n</section>\n    \t"
                    }), 
                    __metadata('design:paramtypes', [user_client_service_1.AuthenticationService])
                ], CreateUserComponent);
                return CreateUserComponent;
            }());
            exports_1("CreateUserComponent", CreateUserComponent);
        }
    }
});
